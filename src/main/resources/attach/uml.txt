@startuml Overall
skinparam shadowing false
skinparam dpi 160
skinparam linetype ortho
hide empty description
left to right direction

[*] --> STARTED

' Common path pieces shared by multiple flows
STARTED --> FILL_PERSONAL_DETAILS : START_FLOW
FILL_PERSONAL_DETAILS --> ANSWER_ACCOUNT_QUESTIONS : SUBMIT_PERSONAL
ANSWER_ACCOUNT_QUESTIONS --> KYC_IN_PROGRESS : SUBMIT_ANSWERS
KYC_IN_PROGRESS --> WAITING_FOR_BIOMETRY : KYC_VERIFIED
WAITING_FOR_BIOMETRY --> BIOMETRY_VERIFIED : BIOMETRY_SUCCESS

' Single-owner branch
BIOMETRY_VERIFIED --> ACCOUNT_CREATED : CREATE_ACCOUNT

' Multi-owner branch
BIOMETRY_VERIFIED --> WAITING_FOR_ALL_OWNERS : ADD_OWNER
WAITING_FOR_ALL_OWNERS --> ACCOUNT_CREATED : CONFIRM_ALL_OWNERS

' Minor branch
BIOMETRY_VERIFIED --> WAITING_FOR_PARENT_CONSENT : REQUEST_PARENT_CONSENT
WAITING_FOR_PARENT_CONSENT --> ACCOUNT_CREATED_LIMITED : PARENT_APPROVED
ACCOUNT_CREATED_LIMITED --> MINOR_ACCOUNT_IDENTIFIED : CREATE_ACCOUNT

' Conversion branch
MINOR_ACCOUNT_IDENTIFIED --> WAITING_FOR_CONVERSION_CONFIRMATION : CONFIRM_CONVERSION
WAITING_FOR_CONVERSION_CONFIRMATION --> ACCOUNT_CONVERTED_TO_REGULAR : COMPLETE_CONVERSION
@enduml

' ===========================
' Single Owner Only
' ===========================
@startuml Single_Owner
skinparam shadowing false
skinparam dpi 160
skinparam linetype ortho
hide empty description
left to right direction

[*] --> KYC_IN_PROGRESS
KYC_IN_PROGRESS --> WAITING_FOR_BIOMETRY : KYC_VERIFIED
WAITING_FOR_BIOMETRY --> BIOMETRY_VERIFIED : BIOMETRY_SUCCESS
BIOMETRY_VERIFIED --> ACCOUNT_CREATED : CREATE_ACCOUNT
@enduml

' ===========================
' Multi Owner Only
' ===========================
@startuml Multi_Owner
skinparam shadowing false
skinparam dpi 160
skinparam linetype ortho
hide empty description
left to right direction

[*] --> STARTED
STARTED --> FILL_PERSONAL_DETAILS : START_FLOW
FILL_PERSONAL_DETAILS --> ANSWER_ACCOUNT_QUESTIONS : SUBMIT_PERSONAL
ANSWER_ACCOUNT_QUESTIONS --> KYC_IN_PROGRESS : SUBMIT_ANSWERS
KYC_IN_PROGRESS --> WAITING_FOR_BIOMETRY : KYC_VERIFIED
WAITING_FOR_BIOMETRY --> BIOMETRY_VERIFIED : BIOMETRY_SUCCESS
BIOMETRY_VERIFIED --> WAITING_FOR_ALL_OWNERS : ADD_OWNER
WAITING_FOR_ALL_OWNERS --> ACCOUNT_CREATED : CONFIRM_ALL_OWNERS
@enduml

' ===========================
' Minor Only
' ===========================
@startuml Minor
skinparam shadowing false
skinparam dpi 160
skinparam linetype ortho
hide empty description
left to right direction

[*] --> STARTED
STARTED --> FILL_PERSONAL_DETAILS : START_FLOW
FILL_PERSONAL_DETAILS --> ANSWER_ACCOUNT_QUESTIONS : SUBMIT_PERSONAL
ANSWER_ACCOUNT_QUESTIONS --> KYC_IN_PROGRESS : SUBMIT_ANSWERS
KYC_IN_PROGRESS --> WAITING_FOR_BIOMETRY : KYC_VERIFIED
WAITING_FOR_BIOMETRY --> BIOMETRY_VERIFIED : BIOMETRY_SUCCESS
BIOMETRY_VERIFIED --> WAITING_FOR_PARENT_CONSENT : REQUEST_PARENT_CONSENT
WAITING_FOR_PARENT_CONSENT --> ACCOUNT_CREATED_LIMITED : PARENT_APPROVED
ACCOUNT_CREATED_LIMITED --> MINOR_ACCOUNT_IDENTIFIED : CREATE_ACCOUNT
@enduml

' ===========================
' Minor -> Regular Conversion Only
' ===========================
@startuml Minor_to_Regular
skinparam shadowing false
skinparam dpi 160
skinparam linetype ortho
hide empty description
left to right direction

[*] --> MINOR_ACCOUNT_IDENTIFIED
MINOR_ACCOUNT_IDENTIFIED --> WAITING_FOR_CONVERSION_CONFIRMATION : CONFIRM_CONVERSION
WAITING_FOR_CONVERSION_CONFIRMATION --> ACCOUNT_CONVERTED_TO_REGULAR : COMPLETE_CONVERSION
@enduml
